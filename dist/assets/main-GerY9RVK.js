import"./modulepreload-polyfill-B5Qt9EMX.js";document.documentElement.classList.add("js-ready");const c=document.getElementById("menu-toggle"),i=document.getElementById("nav-links");c&&i&&(c.addEventListener("click",()=>{c.classList.toggle("active"),i.classList.toggle("active"),document.body.style.overflow=i.classList.contains("active")?"hidden":""}),i.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{c.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""})}));const l=document.querySelector(".cursor-follower");document.addEventListener("mousemove",e=>{l&&(l.style.left=`${e.clientX}px`,l.style.top=`${e.clientY}px`)});const f=document.getElementById("header");window.addEventListener("scroll",()=>{window.scrollY>60?f.classList.add("scrolled"):f.classList.remove("scrolled")},{passive:!0});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const s=this.getAttribute("href");if(s==="#")return;t.preventDefault();const n=document.querySelector(s);if(n){const o=f.offsetHeight,a=n.getBoundingClientRect().top+window.scrollY-o-20;window.scrollTo({top:a,behavior:"smooth"})}})});function y(e){var n;if(e.classList.contains("visible"))return;const t=(n=e.parentElement)==null?void 0:n.querySelectorAll(".reveal, .reveal-right");let s=0;t&&(s=Array.from(t).indexOf(e)*100),setTimeout(()=>{e.classList.add("visible")},s)}const u=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(y(t.target),u.unobserve(t.target))})},{threshold:.05,rootMargin:"50px 0px -30px 0px"}),b=document.querySelectorAll(".reveal, .reveal-right");b.forEach(e=>{u.observe(e)});requestAnimationFrame(()=>{b.forEach(e=>{const t=e.getBoundingClientRect();t.top<window.innerHeight&&t.bottom>0&&(y(e),u.unobserve(e))})});setTimeout(()=>{document.querySelectorAll("#hero .reveal, #hero .reveal-right").forEach(e=>{e.classList.add("visible")})},1500);function x(e){const t=parseFloat(e.dataset.count),s=e.dataset.decimal!==void 0,n=parseInt(e.dataset.decimal||"0"),o=1800,a=performance.now();function m(L){const w=L-a,v=Math.min(w/o,1),q=1-Math.pow(2,-10*v),g=t*q;e.textContent=s?g.toFixed(n):Math.floor(g).toString(),v<1?requestAnimationFrame(m):e.textContent=s?t.toFixed(n):t.toString()}requestAnimationFrame(m)}const E=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.querySelectorAll(".stat-value[data-count]").forEach(s=>{x(s)}),E.unobserve(t.target))})},{threshold:.5}),h=document.querySelector(".hero-stats");h&&E.observe(h);document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".faq-item"),s=t.classList.contains("active");document.querySelectorAll(".faq-item.active").forEach(n=>{n.classList.remove("active")}),s||t.classList.add("active")})});const d=document.getElementById("sticky-cta");window.addEventListener("scroll",()=>{d&&(window.scrollY>window.innerHeight*.7?d.classList.add("visible"):d.classList.remove("visible"))},{passive:!0});const r=document.getElementById("contact-form");r&&r.addEventListener("submit",e=>{e.preventDefault();const t=r.querySelector("#form-submit-btn"),s=t.querySelector("span"),n=s.textContent;t.disabled=!0,s.textContent="Отправка...",setTimeout(()=>{s.textContent="✓ Заявка принята!",t.classList.add("btn-success"),r.reset(),setTimeout(()=>{t.disabled=!1,s.textContent=n,t.classList.remove("btn-success")},4e3)},1500)});const p=document.getElementById("phone");p&&p.addEventListener("input",function(){let e=this.value.replace(/\D/g,"");e.startsWith("8")&&(e="7"+e.slice(1)),e.startsWith("7")||(e="7"+e),e=e.slice(0,11);let t="+7";e.length>1&&(t+=" ("+e.slice(1,4)),e.length>=4&&(t+=") "+e.slice(4,7)),e.length>=7&&(t+="-"+e.slice(7,9)),e.length>=9&&(t+="-"+e.slice(9,11)),this.value=t});async function A(){try{const e=await fetch("/api/config");if(!e.ok)return;const t=await e.json();if(t.theme)for(const[s,n]of Object.entries(t.theme))n&&document.documentElement.style.setProperty(s,n);t.content&&document.querySelectorAll("[data-config]").forEach(s=>{const n=s.getAttribute("data-config"),o=t.content[n];o!=null&&(n==="phone"?(s.textContent=o,s.tagName==="A"&&(s.href="tel:"+o.replace(/[^\\d+]/g,""))):n==="email"?(s.textContent=o,s.tagName==="A"&&(s.href="mailto:"+o)):n==="hero-img"&&s.tagName==="IMG"?o&&o!=="assets/images/hero-expert.webp"&&(s.src=o):s.innerHTML=o)})}catch(e){console.error("Failed to load dynamic config:",e)}}A();
