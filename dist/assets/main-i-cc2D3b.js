import"./modulepreload-polyfill-B5Qt9EMX.js";document.documentElement.classList.add("js-ready");const c=document.getElementById("menu-toggle"),i=document.getElementById("nav-links");c&&i&&(c.addEventListener("click",()=>{c.classList.toggle("active"),i.classList.toggle("active"),document.body.style.overflow=i.classList.contains("active")?"hidden":""}),i.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{c.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""})}));const l=document.querySelector(".cursor-follower");document.addEventListener("mousemove",e=>{l&&(l.style.left=`${e.clientX}px`,l.style.top=`${e.clientY}px`)});const u=document.getElementById("header");window.addEventListener("scroll",()=>{window.scrollY>60?u.classList.add("scrolled"):u.classList.remove("scrolled")},{passive:!0});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){const n=this.getAttribute("href");if(n==="#")return;t.preventDefault();const o=document.querySelector(n);if(o){const s=u.offsetHeight,a=o.getBoundingClientRect().top+window.scrollY-s-20;window.scrollTo({top:a,behavior:"smooth"})}})});function y(e){var o;if(e.classList.contains("visible"))return;const t=(o=e.parentElement)==null?void 0:o.querySelectorAll(".reveal, .reveal-right");let n=0;t&&(n=Array.from(t).indexOf(e)*100),setTimeout(()=>{e.classList.add("visible")},n)}const f=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(y(t.target),f.unobserve(t.target))})},{threshold:.05,rootMargin:"50px 0px -30px 0px"}),E=document.querySelectorAll(".reveal, .reveal-right");E.forEach(e=>{f.observe(e)});requestAnimationFrame(()=>{E.forEach(e=>{const t=e.getBoundingClientRect();t.top<window.innerHeight&&t.bottom>0&&(y(e),f.unobserve(e))})});setTimeout(()=>{document.querySelectorAll("#hero .reveal, #hero .reveal-right").forEach(e=>{e.classList.add("visible")})},1500);function x(e){const t=parseFloat(e.dataset.count),n=e.dataset.decimal!==void 0,o=parseInt(e.dataset.decimal||"0"),s=1800,a=performance.now();function m(L){const w=L-a,v=Math.min(w/s,1),q=1-Math.pow(2,-10*v),h=t*q;e.textContent=n?h.toFixed(o):Math.floor(h).toString(),v<1?requestAnimationFrame(m):e.textContent=n?t.toFixed(o):t.toString()}requestAnimationFrame(m)}const b=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.querySelectorAll(".stat-value[data-count]").forEach(n=>{x(n)}),b.unobserve(t.target))})},{threshold:.5}),g=document.querySelector(".hero-stats");g&&b.observe(g);document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".faq-item"),n=t.classList.contains("active");document.querySelectorAll(".faq-item.active").forEach(o=>{o.classList.remove("active")}),n||t.classList.add("active")})});const d=document.getElementById("sticky-cta");window.addEventListener("scroll",()=>{d&&(window.scrollY>window.innerHeight*.7?d.classList.add("visible"):d.classList.remove("visible"))},{passive:!0});const r=document.getElementById("contact-form");r&&r.addEventListener("submit",e=>{e.preventDefault();const t=r.querySelector("#form-submit-btn"),n=t.querySelector("span"),o=n.textContent;t.disabled=!0,n.textContent="Отправка...",setTimeout(()=>{n.textContent="✓ Заявка принята!",t.classList.add("btn-success"),r.reset(),setTimeout(()=>{t.disabled=!1,n.textContent=o,t.classList.remove("btn-success")},4e3)},1500)});const p=document.getElementById("phone");p&&p.addEventListener("input",function(){let e=this.value.replace(/\D/g,"");e.startsWith("8")&&(e="7"+e.slice(1)),e.startsWith("7")||(e="7"+e),e=e.slice(0,11);let t="+7";e.length>1&&(t+=" ("+e.slice(1,4)),e.length>=4&&(t+=") "+e.slice(4,7)),e.length>=7&&(t+="-"+e.slice(7,9)),e.length>=9&&(t+="-"+e.slice(9,11)),this.value=t});async function A(){try{const e=await fetch("/api/config");if(!e.ok)return;const t=await e.json();if(t.theme)for(const[n,o]of Object.entries(t.theme))o&&document.documentElement.style.setProperty(n,o);t.content&&document.querySelectorAll("[data-config]").forEach(n=>{const o=n.getAttribute("data-config"),s=t.content[o];s!=null&&(o==="phone"?(n.textContent=s,n.tagName==="A"&&(n.href="tel:"+s.replace(/[^\\d+]/g,""))):o==="email"?(n.textContent=s,n.tagName==="A"&&(n.href="mailto:"+s)):n.innerHTML=s)})}catch(e){console.error("Failed to load dynamic config:",e)}}A();
